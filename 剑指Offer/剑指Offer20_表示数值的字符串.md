## &#127800; 剑指 Offer 20. 表示数值的字符串 &#127800;

### &#127826; 题目

- 请实现一个函数用来判断字符串是否表示**数值**（包括整数和小数）。
- 数值（按顺序）可以分成以下几个部分：
  1. 若干空格
  2. 一个 **小数** 或者 **整数**
  3. （可选）一个 `e` 或 `E` ，后面跟着一个 整数
  4. 若干空格
- 小数（按顺序）可以分成以下几个部分：
  1. （可选）一个符号字符（`+` 或 `-`）
  2. 下述格式之一：
    - 至少一位数字，后面跟着一个点 `.`
    - 至少一位数字，后面跟着一个点 `.` ，后面再跟着至少一位数字
    - 一个点 `.` ，后面跟着至少一位数字
- 整数（按顺序）可以分成以下几个部分：
  1. （可选）一个符号字符（`+` 或 `-`）
  2. 至少一位数字
- 部分数值列举如下：
`["+100", "5e2", "-123", "3.1416", "-1E-16", "0123"]`<br>
- 部分非数值列举如下：
`["12e", "1a3.14", "1.2.3", "+-5", "12e+5.4"]`
 

##### 示例 1：

输入：s = "0"<br>
输出：true
##### 示例 2：

输入：s = "e"<br>
输出：false
##### 示例 3：

输入：s = "."<br>
输出：false
##### 示例 4：

输入：s = "    .1  "
输出：true
#### Constraints:

- `1 <= s.length <= 20`
- `s 仅含英文字母（大写和小写），数字（0-9），加号 '+' ，减号 '-' ，空格 ' ' 或者点 '.' 。`

### &#127826; 题解


<details>
<summary>&#127808; 有限状态自动机 &#127808;</summary>

  
### 思路

- 本题使用有限状态自动机。根据字符类型和合法数值的特点，先定义状态，再画出状态转移图，最后编写代码即可。
- 字符类型：
  - 空格 「 」、数字「 0—9 」 、正负号 「 +− 」 、小数点 「 . 」 、幂符号 「 eE 」 
- 状态定义：
  - 按照字符串从左到右的顺序，定义以下 9 种状态。
  0. 开始的空格
  1. 幂符号前的正负号
  2. 小数点前的数字
  3. 小数点、小数点后的数字
  4. 当小数点前为空格时，小数点、小数点后的数字
  5. 幂符号
  6. 幂符号后的正负号
  7. 幂符号后的数字
  8. 结尾的空格
- 结束状态：
  - 合法的结束状态有 2, 3, 7, 8 。
![状态转移图](http://lc-dDwI9S44.cn-n1.lcfile.com/McfnxVEoY4xqbYhqHWpgauzBKdoKIsOP/offer20.png)
  
### 步骤：
1. 初始化状态转移表
2. 按照状态转移表循环遍历每个字符
3. 返回值跳出循环后，若状态 ${p \in {2, 3, 7, 8}}$ ，说明结尾合法，返回 True ，否则返回 False 。
  
```java
    public boolean isNumber(String s) {
        // 建立状态机
        // 0. 开始的空格
        // 1. 幂符号前的正负号
        // 2. 小数点前的数字
        // 3. 小数点、小数点后的数字
        // 4. 当小数点前为空格时，小数点、小数点后的数字
        // 5. 幂符号
        // 6. 幂符号后的正负号
        // 7. 幂符号后的数字
        // 8. 结尾的空格

        // 每个状态机的下标即为状态机标识,内部map放着此状态合法的后续状态走向
        Map[] states = {
                // 0（空格）状态 后可能走向 0（空格），1（符号），2（数字），4（小数点）
                new HashMap<Object, Object>() {{
                    put(' ', 0);
                    put('s', 1);
                    put('d', 2);
                    put('.', 4);
                }},
                // 1（符号）状态 后可能走向 2（数字），4（小数点）
                new HashMap<Object, Object>() {{
                    put('d', 2);
                    put('.', 4);
                }},
                // 2（小数点前的数字）状态 后可能走向 2（数字），3（小数点之后的数字），4（小数点），8（结尾空格）
                new HashMap<Object, Object>() {{
                    put('d', 2);
                    put('.', 3);
                    put('e', 5);
                    put(' ', 8);
                }},
                // 3（小数点之后的数字）状态 后可能走向 3（数字），5（幂符号），8（结尾空格）
                new HashMap<Object, Object>() {{
                    put('d', 3);
                    put('e', 5);
                    put(' ', 8);
                }},
                // 4（当前面空格时的小数点）状态，后可能走向 3（数字）
                new HashMap<Object, Object>() {{
                    put('d', 3);
                }},
                // 5（幂符号） 状态 ，后可能走向 6（幂符号后的正负号），7（幂符号后的数字）
                new HashMap<Object, Object>() {{
                    put('s', 6);
                    put('d', 7);
                }},
                // 6（幂符号后的正负号），后可能走向 7（幂符号后的数字）
                new HashMap<Object, Object>() {{
                    put('d', 7);
                }},
                // 7（幂符号后的数字），后可能走向 7（幂符号后的数字）
                new HashMap<Object, Object>() {{
                    put('d', 7);
                    put(' ', 8);
                }},
                // 8 （结尾的空格） 后可能走向 8（多余的空格），
                new HashMap<Object, Object>() {{
                    put(' ', 8);
                }}
        };
        int p = 0;
        char t;
        // 将字符串转为字符数组逐个遍历，
        for (char c : s.toCharArray()) {
            if (c >= '0' && c <= '9') t = 'd';
            else if (c == '+' || c == '-') t = 's';
            else if (c == 'e' || c == 'E') t = 'e';
            else if (c == '.' || c == ' ') t = c;
            else t = '?';
            if (!states[p].containsKey(t)) return false;
            p = (int) states[p].get(t);
        }
        return p == 2 || p == 3 || p == 7 || p == 8;
    }
```
  
</details>
  
  
[参考](Krahets "链接：https://leetcode-cn.com/problems/biao-shi-shu-zhi-de-zi-fu-chuan-lcof/solution/mian-shi-ti-20-biao-shi-shu-zhi-de-zi-fu-chuan-y-2/")